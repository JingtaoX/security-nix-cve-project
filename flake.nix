{
  inputs = {
    nixpkgs.url = "nixpkgs/nixos-unstable";

    # TODO make this into it's own file to make this cleaner
    jsonformer = {
      type = "github";
      owner = "1rgs";
      repo = "jsonformer";
      flake = false;
    };

    tree-grepper.url = "github:BrianHicks/tree-grepper";
    tree-grepper.inputs.nixpkgs.follows = "nixpkgs";
  };

  description = "Some flake";
  outputs = { self, nixpkgs, tree-grepper, ... }:
    let
      system = "x86_64-linux";
      pkgs = import nixpkgs { inherit system; };
      jsonformer = pkgs.python3Packages.buildPythonPackage rec {
        pname = "jsonformer";
        src = self.inputs.jsonformer;
        version = "0.12.0";
        format = "pyproject";
        # buildInputs = [ pkgs.poetry ];

        nativeBuildInputs = [ pkgs.python3.pkgs.poetry-core ];
      };
      go-cve-dictionary = pkgs.callPackage ./nix/go-cve-dictionary.nix { };

    in {
      devShells."${system}".default = pkgs.mkShell {
        buildInputs = with pkgs; [
          (python3.withPackages
            (p: with p; [ transformers pytorch termcolor beautifulsoup4 ]))
          # lsp server for python
          nodePackages.pyright
          jsonformer
          fd
          ripgrep
          exploitdb
          go-exploitdb
          (tree-grepper.defaultPackage."${system}")
          go-cve-dictionary

        ];
      };
    };
}

